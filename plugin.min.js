(function(){tinymce.PluginManager.add("html5image",function(d){var f,g,h,k,l,c,e;f=function(){c.style.background="#f8ffe5"};g=function(a){a.stopPropagation();a.preventDefault()};h=function(a){var b;a.stopPropagation();a.preventDefault();c.style.background="none";(b=a.dataTransfer.files[0])&&b.type&&/image\/((jpeg)|(png)|(gif)|(jpg))/.test(b.type)?e(b):(a=$(a.dataTransfer.getData("text/html")).filter("img").attr("src"),d.insertContent('<img src="'+a+'" />'))};k=function(a){if(30>a.x||a.x>c.clientWidth-
30||30>a.y||a.y>c.clientHeight-30)c.style.background="none"};l=function(a){var b;"undefined"!==typeof a.clipboardData.types&&0!==a.clipboardData.types.length&&(b=a.clipboardData.types[0],"Files"===b&&(b=a.clipboardData.items[0].getAsFile(),e(b),a.stopPropagation(),a.preventDefault()))};e=function(a){var b=new FileReader;b.onload=function(a){d.insertContent('<img src="'+a.target.result+'" />')};b.readAsDataURL(a)};"undefined"!==typeof ImageData&&setTimeout(function(){c=d.dom.doc.body;c.addEventListener("dragenter",
f,!1);c.addEventListener("dragover",g,!1);c.addEventListener("drop",h,!1);c.addEventListener("dragleave",k,!1);c.addEventListener("paste",l,!1)},0)})})();